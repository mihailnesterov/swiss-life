import React from 'react';
import { useActions } from '../../hooks/useActions';
import {updateMessage, deleteMessage} from '../../api/message';
import { t, Trans } from '@lingui/macro';

const MessagesTools = (props) => {

    const {selectedMessages, setSelectedMessages, setUpdating} = props;

    const {fetchUserAuthorizedExpanded} = useActions();

    const handleRead = () => {
        if( selectedMessages.length > 0 ) {
            setUpdating(true);
            selectedMessages.forEach(id => {
                updateMessage(id, {'isRead': 1})
                    .then(res => console.log(res.status))
                    .catch(err => console.log(err));
            });
            setUpdating(false);
            setSelectedMessages([]);
            fetchUserAuthorizedExpanded();
        }
    }

    /*const handleDelete = () => {
        if( selectedMessages.length > 0 ) {
            if (confirm(t({
                id: 'Удалить выбранные сообщения?', 
                message: 'Удалить выбранные сообщения?'
            }))) {
                setUpdating(true);
                selectedMessages.forEach(id => {
                    deleteMessage(id)
                        .then(res => console.log(res.status))
                        .catch(err => console.log(err));
                });
                setUpdating(false);
                setSelectedMessages([]);
                fetchUserAuthorizedExpanded();
            }
        }
    }*/

    return (
        <div className='messages-tools'>
            <button 
                onClick={handleRead}
                disabled={selectedMessages.length === 0 ? true : false}
            >
                <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M28.0737 10.1162L19.4188 1.81752C18.2458 0.656378 16.6633 0.00352416 15.0132 1.42259e-05C13.3631 -0.0034957 11.7779 0.642621 10.6 1.79876L1.925 10.1162C1.31827 10.7008 0.835203 11.4015 0.504511 12.1766C0.173819 12.9517 0.00225028 13.7854 0 14.6282L0 23.7472C0.00198482 25.405 0.661102 26.9942 1.83277 28.1664C3.00445 29.3386 4.59301 29.998 6.25 30H23.75C25.407 29.998 26.9956 29.3386 28.1672 28.1664C29.3389 26.9942 29.998 25.405 30 23.7472V14.6282C29.9978 13.7853 29.8261 12.9515 29.4952 12.1763C29.1643 11.4012 28.6809 10.7006 28.0737 10.1162ZM12.3487 3.5858C13.0576 2.88299 14.0162 2.49034 15.0141 2.49409C16.0121 2.49784 16.9677 2.89769 17.6712 3.60581L26.105 11.6894L17.6513 20.1481C16.9366 20.8296 15.9873 21.2098 15 21.2098C14.0127 21.2098 13.0634 20.8296 12.3487 20.1481L3.89375 11.6894L12.3487 3.5858ZM27.5 23.7472C27.5 24.7422 27.1049 25.6965 26.4017 26.4001C25.6984 27.1036 24.7446 27.4989 23.75 27.4989H6.25C5.25544 27.4989 4.30161 27.1036 3.59835 26.4001C2.89509 25.6965 2.5 24.7422 2.5 23.7472V14.6282C2.50126 14.3854 2.52596 14.1434 2.57375 13.9054L10.5813 21.9164C11.7572 23.0813 13.3451 23.7348 15 23.7348C16.6549 23.7348 18.2428 23.0813 19.4188 21.9164L27.4263 13.9054C27.474 14.1434 27.4987 14.3854 27.5 14.6282V23.7472Z" fill="#F8F8F8"/>
                </svg>
                <span><Trans>Прочитано</Trans></span>
            </button>
            <button
                //onClick={handleDelete}
                disabled={true}
                //disabled={selectedMessages.length === 0 ? true : false}
            >
                <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M26.25 5H22.375C22.0849 3.58927 21.3173 2.32168 20.2016 1.4109C19.0859 0.500113 17.6903 0.00181816 16.25 0L13.75 0C12.3097 0.00181816 10.9141 0.500113 9.79844 1.4109C8.68273 2.32168 7.91512 3.58927 7.625 5H3.75C3.41848 5 3.10054 5.1317 2.86612 5.36612C2.6317 5.60054 2.5 5.91848 2.5 6.25C2.5 6.58152 2.6317 6.89946 2.86612 7.13388C3.10054 7.3683 3.41848 7.5 3.75 7.5H5V23.75C5.00198 25.407 5.6611 26.9956 6.83278 28.1672C8.00445 29.3389 9.59301 29.998 11.25 30H18.75C20.407 29.998 21.9956 29.3389 23.1672 28.1672C24.3389 26.9956 24.998 25.407 25 23.75V7.5H26.25C26.5815 7.5 26.8995 7.3683 27.1339 7.13388C27.3683 6.89946 27.5 6.58152 27.5 6.25C27.5 5.91848 27.3683 5.60054 27.1339 5.36612C26.8995 5.1317 26.5815 5 26.25 5ZM13.75 2.5H16.25C17.0253 2.50095 17.7814 2.74172 18.4145 3.1893C19.0476 3.63689 19.5268 4.26936 19.7863 5H10.2137C10.4732 4.26936 10.9524 3.63689 11.5855 3.1893C12.2186 2.74172 12.9747 2.50095 13.75 2.5ZM22.5 23.75C22.5 24.7446 22.1049 25.6984 21.4017 26.4017C20.6984 27.1049 19.7446 27.5 18.75 27.5H11.25C10.2554 27.5 9.30161 27.1049 8.59835 26.4017C7.89509 25.6984 7.5 24.7446 7.5 23.75V7.5H22.5V23.75Z" fill="#F8F8F8"/>
                    <path d="M12.5 22.5C12.8315 22.5 13.1495 22.3683 13.3839 22.1339C13.6183 21.8995 13.75 21.5815 13.75 21.25V13.75C13.75 13.4185 13.6183 13.1005 13.3839 12.8661C13.1495 12.6317 12.8315 12.5 12.5 12.5C12.1685 12.5 11.8505 12.6317 11.6161 12.8661C11.3817 13.1005 11.25 13.4185 11.25 13.75V21.25C11.25 21.5815 11.3817 21.8995 11.6161 22.1339C11.8505 22.3683 12.1685 22.5 12.5 22.5Z" fill="#F8F8F8"/>
                    <path d="M17.5 22.5C17.8315 22.5 18.1495 22.3683 18.3839 22.1339C18.6183 21.8995 18.75 21.5815 18.75 21.25V13.75C18.75 13.4185 18.6183 13.1005 18.3839 12.8661C18.1495 12.6317 17.8315 12.5 17.5 12.5C17.1685 12.5 16.8505 12.6317 16.6161 12.8661C16.3817 13.1005 16.25 13.4185 16.25 13.75V21.25C16.25 21.5815 16.3817 21.8995 16.6161 22.1339C16.8505 22.3683 17.1685 22.5 17.5 22.5Z" fill="#F8F8F8"/>
                </svg>
                <span><Trans>Удалить</Trans></span>
            </button>
        </div>
    )
}

export default MessagesTools;